function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{pQD6:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var s=o("EVdn"),n=function(){function e(t,o,s){_classCallCheck(this,e),this.modalCtrl=t,this.router=o,this.toastCtrl=s,this.guestQty=0,this.pickupNow=!1,this.isDisabled=!1}return _createClass(e,[{key:"ngOnInit",value:function(){console.log(this.cartItems)}},{key:"pickupNowChange",value:function(e){console.log(e),e&&(this.isDisabled=!0),e||(this.isDisabled=!1)}},{key:"dismissCart",value:function(){this.modalCtrl.dismiss({dismissed:"closed",totalQty:this.itemQty})}},{key:"incrementQty",value:function(e){e.count+=1,this.itemQty+=1,console.log(e.count+1,e)}},{key:"decrementQty",value:function(e){e.count-1<1?(e.count=0,this.itemQty-=1,0===this.itemQty&&this.dismissCart(),console.log(e.count,e)):(e.count-=1,this.itemQty-=1,0===this.itemQty&&this.dismissCart(),console.log(e.count,e))}},{key:"getTimestamp",value:function(){if(this.pickupNow){var e=new Date,t=new Date(e).getFullYear()+"-0"+new Date(e).getMonth()+"-"+new Date(e).getDate()+" "+new Date(e).toLocaleTimeString();return console.log(t),t}var o=new Date(this.date).getFullYear()+"-0"+new Date(this.date).getMonth()+"-"+new Date(this.date).getDate()+" "+new Date(this.time).toLocaleTimeString();return console.log(o),o}},{key:"returnPickupMessage",value:function(){return this.pickupNow?"Your request has been placed with the laundry. You will receive a confirmation call in 2 minutes":"Your laundry pick-up request has been placed."}},{key:"placedOrder",value:function(){var e=this,t=[];if(this.cartItems.filter((function(e){0!==e.count&&t.push({laundry_item_id:e.id,description:e.description,quantity:e.count})})),void 0===this.room||""===this.room||null===this.room)return this.toastCtrl.create({message:"Please enter room number.",keyboardClose:!0,position:"top",color:"warning",duration:1500}).then((function(e){e.present()})),!1;if(void 0===this.date&&!this.pickupNow)return this.toastCtrl.create({message:"Please select date",keyboardClose:!0,position:"top",color:"warning",duration:1500}).then((function(e){e.present()})),!1;if(void 0===this.time&&!this.pickupNow)return this.toastCtrl.create({message:"Please select time",keyboardClose:!0,position:"top",color:"warning",duration:1500}).then((function(e){e.present()})),!1;var o={enc_hotel_id:"N1loWW9Sc3JKbjJUMEZNdmpERGVrM3N6b3N5ZjN3aWZCTFlHRjlGZFFVZz0=",description:null,items:JSON.stringify(t),room_no:this.room,requested_pickup_at:this.getTimestamp()};console.log(o),s.post("https://vserve-api.valet2you.in/api/v1/wash/laundry/guest/order",o).done((function(t){console.log(t),"Success"===t.message&&e.toastCtrl.create({header:"Thank you!",message:e.returnPickupMessage(),keyboardClose:!0,position:"bottom",color:"success",buttons:[{side:"end",text:"OKAY",handler:function(){e.dismissCart(),e.router.navigateByUrl("/hotel/tabs/hotel-home/irs")}}]}).then((function(e){e.present()}))})).fail((function(t,o,s){return console.log(t,o,s),200!==t.status&&"Room is not available"!==t.responseJSON.message?(e.dismissCart(),e.toastCtrl.create({message:"Something went wrong. Please try after sometime!",keyboardClose:!0,duration:1e3,color:"danger",position:"top"}).then((function(e){e.present()})),!1):200!==t.status&&"Room is not available"===t.responseJSON.message?(e.toastCtrl.create({message:t.responseJSON.message+" Please enter correct room number.",keyboardClose:!0,duration:3e3,color:"warning",position:"top"}).then((function(e){e.present()})),!1):void 0}))}}]),e}()}}]);