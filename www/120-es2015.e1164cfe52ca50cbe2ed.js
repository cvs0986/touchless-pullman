(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{pQD6:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var o=s("EVdn");class i{constructor(t,e,s){this.modalCtrl=t,this.router=e,this.toastCtrl=s,this.guestQty=0,this.pickupNow=!1,this.isDisabled=!1}ngOnInit(){console.log(this.cartItems)}pickupNowChange(t){console.log(t),t&&(this.isDisabled=!0),t||(this.isDisabled=!1)}dismissCart(){this.modalCtrl.dismiss({dismissed:"closed",totalQty:this.itemQty})}incrementQty(t){t.count+=1,this.itemQty+=1,console.log(t.count+1,t)}decrementQty(t){t.count-1<1?(t.count=0,this.itemQty-=1,0===this.itemQty&&this.dismissCart(),console.log(t.count,t)):(t.count-=1,this.itemQty-=1,0===this.itemQty&&this.dismissCart(),console.log(t.count,t))}getTimestamp(){if(this.pickupNow){const t=new Date,e=new Date(t).getFullYear()+"-0"+new Date(t).getMonth()+"-"+new Date(t).getDate()+" "+new Date(t).toLocaleTimeString();return console.log(e),e}{const t=new Date(this.date).getFullYear()+"-0"+new Date(this.date).getMonth()+"-"+new Date(this.date).getDate()+" "+new Date(this.time).toLocaleTimeString();return console.log(t),t}}returnPickupMessage(){return this.pickupNow?"Your request has been placed with the laundry. You will receive a confirmation call in 2 minutes":"Your laundry pick-up request has been placed."}placedOrder(){const t=[];if(this.cartItems.filter(e=>{0!==e.count&&t.push({laundry_item_id:e.id,description:e.description,quantity:e.count})}),void 0===this.room||""===this.room||null===this.room)return this.toastCtrl.create({message:"Please enter room number.",keyboardClose:!0,position:"top",color:"warning",duration:1500}).then(t=>{t.present()}),!1;if(void 0===this.date&&!this.pickupNow)return this.toastCtrl.create({message:"Please select date",keyboardClose:!0,position:"top",color:"warning",duration:1500}).then(t=>{t.present()}),!1;if(void 0===this.time&&!this.pickupNow)return this.toastCtrl.create({message:"Please select time",keyboardClose:!0,position:"top",color:"warning",duration:1500}).then(t=>{t.present()}),!1;const e={enc_hotel_id:"N1loWW9Sc3JKbjJUMEZNdmpERGVrM3N6b3N5ZjN3aWZCTFlHRjlGZFFVZz0=",description:null,items:JSON.stringify(t),room_no:this.room,requested_pickup_at:this.getTimestamp()};console.log(e),o.post("https://vserve-api.valet2you.in/api/v1/wash/laundry/guest/order",e).done(t=>{console.log(t),"Success"===t.message&&this.toastCtrl.create({header:"Thank you!",message:this.returnPickupMessage(),keyboardClose:!0,position:"bottom",color:"success",buttons:[{side:"end",text:"OKAY",handler:()=>{this.dismissCart(),this.router.navigateByUrl("/hotel/tabs/hotel-home/irs")}}]}).then(t=>{t.present()})}).fail((t,e,s)=>(console.log(t,e,s),200!==t.status&&"Room is not available"!==t.responseJSON.message?(this.dismissCart(),this.toastCtrl.create({message:"Something went wrong. Please try after sometime!",keyboardClose:!0,duration:1e3,color:"danger",position:"top"}).then(t=>{t.present()}),!1):200!==t.status&&"Room is not available"===t.responseJSON.message?(this.toastCtrl.create({message:t.responseJSON.message+" Please enter correct room number.",keyboardClose:!0,duration:3e3,color:"warning",position:"top"}).then(t=>{t.present()}),!1):void 0))}}}}]);